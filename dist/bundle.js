(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var u=t[c],l=r.base?u[0]+r.base:u[0],f=i[l]||0,s="".concat(l," ").concat(f);i[l]=f+1;var p=n(s),y={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(y);else{var d=o(y,r);r.byIndex=c,e.splice(c,0,{identifier:s,updater:d,references:1})}a.push(s)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var u=r(t,o),l=0;l<i.length;l++){var f=n(i[l]);0===e[f].references&&(e[f].updater(),e.splice(f,1))}i=u}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var u=this[c][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var f=[].concat(t[l]);r&&a[f[0]]||(void 0!==i&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),n&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=n):f[2]=n),o&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=o):f[4]="".concat(o)),e.push(f))}},e}},342:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(354),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,":root {\n  --ui-bg: #f7f8fa;\n  --ui-border: #d0d4dd;\n  --ui-accent: #0066ff;\n}\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\nbutton {\n  font: inherit;\n  cursor: pointer;\n  padding: 0.35rem 0.75rem;\n  border-radius: 6px;\n  border: 1px solid #d0d4dd;\n  border: 1px solid var(--ui-border);\n  background: white;\n  transition: background 0.15s;\n}\n\nbutton:hover {\n  background: #eef2ff;\n}\n\napp-root {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.controls {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border-bottom: 1px solid #d0d4dd;\n  border-bottom: 1px solid var(--ui-border);\n  background: #f7f8fa;\n  background: var(--ui-bg);\n}\n\n.buffer-zone,\n.workspace-wrapper {\n  flex: 1 1 0;\n  overflow: hidden;\n}\n\n.workspace-wrapper {\n  flex: 1 1 0;\n  display: flex;\n  position: relative;\n  min-height: 300px;\n}\n\n.workspace-canvas {\n  display: block;\n  position: relative;\n  flex: 1 1 auto;\n  min-height: 400px;\n  background: #fff;\n  overflow: hidden;\n}\n\n.viewport {\n  position: absolute;\n  top: 30px;\n  left: 30px;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  background: #fefefe;\n}\n\npoly-item {\n  display: inline-block;\n}\n\npoly-item svg {\n  width: 80px;\n  height: 80px;\n  pointer-events: none;\n}\n","",{version:3,sources:["webpack://./src/styles/main.css"],names:[],mappings:"AAAA;EACE,gBAAgB;EAChB,oBAAoB;EACpB,oBAAoB;AACtB;;AAEA;;;EAGE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,eAAe;EACf,wBAAwB;EACxB,kBAAkB;EAClB,yBAAkC;EAAlC,kCAAkC;EAClC,iBAAiB;EACjB,4BAA4B;AAC9B;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,cAAc;EACd,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,WAAW;EACX,oBAAoB;EACpB,gCAAyC;EAAzC,yCAAyC;EACzC,mBAAwB;EAAxB,wBAAwB;AAC1B;;AAEA;;EAEE,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,aAAa;EACb,kBAAkB;EAClB,iBAAiB;AACnB;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,cAAc;EACd,iBAAiB;EACjB,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,QAAQ;EACR,SAAS;EACT,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,oBAAoB;AACtB",sourcesContent:[":root {\r\n  --ui-bg: #f7f8fa;\r\n  --ui-border: #d0d4dd;\r\n  --ui-accent: #0066ff;\r\n}\r\n\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbutton {\r\n  font: inherit;\r\n  cursor: pointer;\r\n  padding: 0.35rem 0.75rem;\r\n  border-radius: 6px;\r\n  border: 1px solid var(--ui-border);\r\n  background: white;\r\n  transition: background 0.15s;\r\n}\r\n\r\nbutton:hover {\r\n  background: #eef2ff;\r\n}\r\n\r\napp-root {\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.controls {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  border-bottom: 1px solid var(--ui-border);\r\n  background: var(--ui-bg);\r\n}\r\n\r\n.buffer-zone,\r\n.workspace-wrapper {\r\n  flex: 1 1 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.workspace-wrapper {\r\n  flex: 1 1 0;\r\n  display: flex;\r\n  position: relative;\r\n  min-height: 300px;\r\n}\r\n\r\n.workspace-canvas {\r\n  display: block;\r\n  position: relative;\r\n  flex: 1 1 auto;\r\n  min-height: 400px;\r\n  background: #fff;\r\n  overflow: hidden;\r\n}\r\n\r\n.viewport {\r\n  position: absolute;\r\n  top: 30px;\r\n  left: 30px;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  background: #fefefe;\r\n}\r\n\r\npoly-item {\r\n  display: inline-block;\r\n}\r\n\r\npoly-item svg {\r\n  width: 80px;\r\n  height: 80px;\r\n  pointer-events: none;\r\n}\r\n"],sourceRoot:""}]);const c=a},354:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),o=n.n(r),i=n(825),a=n.n(i),c=n(659),u=n.n(c),l=n(56),f=n.n(l),s=n(540),p=n.n(s),y=n(113),d=n.n(y),b=n(342),v={};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(w())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&E(o,n.prototype),o}(t,arguments,x(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,t)},g(t)}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}v.styleTagTransform=d(),v.setAttributes=f(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=p(),o()(b.A,v),b.A&&b.A.locals&&b.A.locals;var O=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=x(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,n||[],x(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["axis"]}}],(r=[{key:"connectedCallback",value:function(){var t;this.axis=null!==(t=this.getAttribute("axis"))&&void 0!==t?t:"x",this.canvas=document.createElement("canvas"),this.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.update(1,{x:0,y:0})}},{key:"update",value:function(t,e){var n="x"===this.axis?this.offsetWidth:this.offsetHeight;this.canvas.width="x"===this.axis?n:30,this.canvas.height="x"===this.axis?30:n;var r=this.ctx;r.clearRect(0,0,this.canvas.width,this.canvas.height),r.strokeStyle="#889",r.lineWidth=1;for(var o=50*t,i=Math.ceil(n/o)+1,a=0;a<i;a+=1){var c=a*o-("x"===this.axis?e.x:e.y)%o;r.beginPath(),"x"===this.axis?(r.moveTo(c,0),r.lineTo(c,15),r.fillText(a,c+2,28)):(r.moveTo(15,c),r.lineTo(0,c),r.fillText(a,18,c-2)),r.stroke()}}}])&&m(n.prototype,r),o&&m(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g(HTMLElement));customElements.define("ruler-scale",O);var S="poly-data";function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}function k(t){var e="function"==typeof Map?new Map:void 0;return k=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(P())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&T(o,n.prototype),o}(t,arguments,M(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,t)},k(t)}function P(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P=function(){return!!t})()}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=M(e),function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P()?Reflect.construct(e,n||[],M(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){this.innerHTML='\n      <div class="controls">\n        <button id="create">Создать</button>\n        <button id="save">Сохранить</button>\n        <button id="reset">Сбросить</button>\n      </div>\n      <div class="buffer-zone"></div>\n      <div class="workspace-wrapper"></div>\n    ';var t=document.createElement("buffer-zone");this.querySelector(".buffer-zone").append(t);var e=document.createElement("workspace-canvas");this.querySelector(".workspace-wrapper").append(e),this.querySelector("#create").addEventListener("click",(function(){(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=Math.floor(Math.random()*(e-t+1))+t;return Array.from({length:n},(function(){var t=Array.from({length:3+Math.floor(5*Math.random())},(function(){return[(80*Math.random()).toFixed(1),(80*Math.random()).toFixed(1)]}));return'<polygon points="'.concat(t.map((function(t){return t.join(",")})).join(" "),'" />')}))})().forEach((function(e){return t.addPolygon(e)}))})),this.querySelector("#save").addEventListener("click",(function(){var t;t=e.getPolygonsJSON(),localStorage.setItem(S,JSON.stringify(t)),alert("Состояние сохранено в localStorage 📦")})),this.querySelector("#reset").addEventListener("click",(function(){confirm("Очистить localStorage и перезагрузить страницу?")&&(localStorage.removeItem(S),location.reload())})),window.addEventListener("DOMContentLoaded",(function(){(function(){try{var t;return null!==(t=JSON.parse(localStorage.getItem(S)))&&void 0!==t?t:[]}catch(t){return[]}})().forEach((function(t){return e.addPolygonFromJSON(t)}))}))}}],r&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k(HTMLElement));function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}function N(t){var e="function"==typeof Map?new Map:void 0;return N=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(H())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&F(o,n.prototype),o}(t,arguments,q(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},N(t)}function H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(H=function(){return!!t})()}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}customElements.define("app-root",_);var D=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=q(e),function(t,e){if(e&&("object"==R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,H()?Reflect.construct(e,n||[],q(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(e,t),n=e,(r=[{key:"connectedCallback",value:function(){this.style.display="flex",this.style.gap="0.5rem",this.style.flexWrap="wrap",this.style.padding="0.5rem",this.style.minHeight="120px",this.style.borderBottom="1px dashed var(--ui-border)"}},{key:"addPolygon",value:function(t){var e=document.createElement("poly-item"),n='<svg viewBox="0 0 100 100" width="80" height="80">'.concat(t,"</svg>");e.setAttribute("source",btoa(t)),e.innerHTML=n,this.append(e)}}])&&L(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(N(HTMLElement));function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t){if("object"!=J(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}function X(t){var e="function"==typeof Map?new Map:void 0;return X=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Y())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&K(o,n.prototype),o}(t,arguments,Q(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),K(n,t)},X(t)}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y=function(){return!!t})()}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}customElements.define("buffer-zone",D);var $=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Q(e),function(t,e){if(e&&("object"==J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y()?Reflect.construct(e,n||[],Q(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){var t=this;Object.assign(this.style,{position:"relative",background:"#fff",overflow:"hidden",display:"block",flex:"1 1 auto",minHeight:"500px"}),this.scale=1,this.offset={x:0,y:0},this.innerHTML='\n      <ruler-scale axis="x"></ruler-scale>\n      <div class="viewport" style="position:absolute;top:30px;left:30px;right:0;bottom:0;overflow:hidden;background:#fefefe;"></div>\n      <ruler-scale axis="y" style="width:30px;height:100%;position:absolute;top:30px;left:0;"></ruler-scale>\n    ',this.viewport=this.querySelector(".viewport"),this.rulers=this.querySelectorAll("ruler-scale"),this.content=document.createElement("div"),Object.assign(this.content.style,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",transformOrigin:"0 0"}),this.viewport.append(this.content),this.viewport.addEventListener("dragover",(function(t){return t.preventDefault()})),this.viewport.addEventListener("drop",(function(e){e.preventDefault();var n=e.dataTransfer.getData("text/plain");if(n){var r=document.querySelector("[dragging]");if(r&&r.parentElement===t.content){var o=t.content.getBoundingClientRect(),i=(e.clientX-o.left-t.offset.x)/t.scale,a=(e.clientY-o.top-t.offset.y)/t.scale;return r.style.left="".concat(i,"px"),r.style.top="".concat(a,"px"),void r.removeAttribute("dragging")}var c=document.createElement("poly-item");c.setAttribute("source",n),c.innerHTML='<svg viewBox="0 0 100 100" width="80" height="80">'.concat(atob(n),"</svg>"),c.style.position="absolute",t.content.append(c)}})),this.addEventListener("wheel",(function(e){if(e.ctrlKey){e.preventDefault();var n=Math.sign(e.deltaY);t.scale=Math.max(.2,Math.min(4,t.scale-.1*n)),t.applyTransform()}}));var e,n=!1;this.addEventListener("pointerdown",(function(t){0===t.button&&t.altKey&&(n=!0,e={x:t.clientX,y:t.clientY})})),window.addEventListener("pointermove",(function(r){n&&(t.offset.x+=r.clientX-e.x,t.offset.y+=r.clientY-e.y,e={x:r.clientX,y:r.clientY},t.applyTransform())})),window.addEventListener("pointerup",(function(){return n=!1})),requestAnimationFrame((function(){return t.applyTransform()}))}},{key:"applyTransform",value:function(){var t=this;this.content.style.transform="translate(".concat(this.offset.x,"px,").concat(this.offset.y,"px) scale(").concat(this.scale,")"),this.rulers.forEach((function(e){return"function"==typeof e.update&&e.update(t.scale,t.offset)}))}},{key:"getPolygonsJSON",value:function(){return function(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.content.children).map((function(t){return t.toJSON()}))}},{key:"addPolygonFromJSON",value:function(t){var e=window.customElements.get("poly-item").fromJSON(t);this.content.append(e)}}],r&&z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(X(HTMLElement));function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function V(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function et(t){var e=function(t){if("object"!=G(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:e+""}function nt(t){var e="function"==typeof Map?new Map:void 0;return nt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(rt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&ot(o,n.prototype),o}(t,arguments,it(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ot(n,t)},nt(t)}function rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rt=function(){return!!t})()}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}function it(t){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},it(t)}customElements.define("workspace-canvas",$);var at=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=it(e),function(t,e){if(e&&("object"==G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rt()?Reflect.construct(e,n||[],it(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){var t=this;this.draggable=!0,this.style.cursor="grab",this.style.userSelect="none",this.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/plain",t.getAttribute("source")),t.setAttribute("dragging","true"),t.style.opacity="0.4"})),this.addEventListener("dragend",(function(){t.removeAttribute("dragging"),t.style.opacity="1"}))}},{key:"toJSON",value:function(){var t,e,n=this.querySelector("polygon,polyline");return{tag:n.tagName,points:V(n.points).map((function(t){return[t.x,t.y]})),x:parseFloat(null!==(t=this.style.left)&&void 0!==t?t:0),y:parseFloat(null!==(e=this.style.top)&&void 0!==e?e:0)}}}],o=[{key:"fromJSON",value:function(t){var e=document.createElement("poly-item");return e.innerHTML='\n    <svg viewBox="0 0 100 100" width="80" height="80">\n      <'.concat(t.tag,' points="').concat(t.points.map((function(t){return t.join(",")})).join(" "),'" />\n    </svg>\n  '),e.style.position="absolute",e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px"),e}}],r&&tt(n.prototype,r),o&&tt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(nt(HTMLElement));customElements.define("poly-item",at)})();
//# sourceMappingURL=bundle.js.map